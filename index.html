<!DOCTYPE html>
<html>
    <head>
        <title>Home &mdash; Eric Poe &mdash; A Gentle Coder, Dad, and Sometime Wit</title>
        <meta charset="utf-8">
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <meta name="robots" content="index, follow">
                <link href="http://ericpoe.com/components/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <link href="http://ericpoe.com/components/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css" />
        <link href="http://ericpoe.com/css/style.css" rel="stylesheet" type="text/css" />
        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <link rel="stylesheet" href="http://ericpoe.com/components/font-awesome/css/font-awesome.min.css" />
        <link rel="stylesheet" href="http://ericpoe.com/components/highlightjs/styles/solarized_dark.css" />

        <link rel="canonical" href="http://ericpoe.com/"/>

        <link rel="apple-touch-startup-image" href="http://ericpoe.com/images/jackson/2048x2048.png">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <link rel="shortcut icon" sizes="76x76" href="http://ericpoe.com/images/jackson/76x76.png">
        <link rel="shortcut icon" sizes="120x120" href="http://ericpoe.com/images/jackson/120x120.png">
        <link rel="shortcut icon" sizes="128x128" href="http://ericpoe.com/images/jackson/128x128.png">
        <link rel="shortcut icon" sizes="152x152" href="http://ericpoe.com/images/jackson/152x152.png">
        <link rel="shortcut icon" sizes="196x196" href="http://ericpoe.com/images/jackson/196x196.png">
        <link rel="shortcut icon" sizes="512x512" href="http://ericpoe.com/images/jackson/512x512.png">
        <link rel="shortcut icon" sizes="1024x1024" href="http://ericpoe.com/images/jackson/1024x1024.png">
        <link rel="shortcut icon" sizes="2048x2048" href="http://ericpoe.com/images/jackson/2048x2048.png">
        <link rel="apple-touch-icon" sizes="76x76" href="http://ericpoe.com/images/jackson/76x76.png">
        <link rel="apple-touch-icon" sizes="120x120" href="http://ericpoe.com/images/jackson/120x120.png">
        <link rel="apple-touch-icon" sizes="128x128" href="http://ericpoe.com/images/jackson/128x128.png">
        <link rel="apple-touch-icon" sizes="152x152" href="http://ericpoe.com/images/jackson/152x152.png">
        <link rel="apple-touch-icon" sizes="196x196" href="http://ericpoe.com/images/jackson/196x196.png">
        <link rel="apple-touch-icon" sizes="512x512" href="http://ericpoe.com/images/jackson/512x512.png">
        <link rel="apple-touch-icon" sizes="1024x1024" href="http://ericpoe.com/images/jackson/1024x1024.png">
        <link rel="apple-touch-icon" sizes="2048x2048" href="http://ericpoe.com/images/jackson/2048x2048.png">

        <link rel="stylesheet" href="http://ericpoe.com/components/highlightjs/styles/github.css" />
        <link rel="alternate" type="application/atom+xml" href="http://ericpoe.com/atom.xml" title="Eric Poe activity feed" />
        <style>
        /** quick fix because bootstrap <pre> has a background-color. */
        pre code { background-color: inherit; }
        </style>
                                    </head>
    <body>
        <header>
            <div class="navbar navbar-inverse navbar-fixed-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="http://ericpoe.com/">Eric Poe</a>
                        <div class="nav-collapse collapse">
                            <ul class="nav">
                                <li><a href="http://ericpoe.com/blog">Posts Archive</a></li>
                                <li><a href="http://ericpoe.com/blog/categories">Categories</a></li>
                                <li><a href="http://ericpoe.com/blog/tags">Tags</a></li>
                                <li><a href="http://ericpoe.com/about">About</a></li>
                            </ul>
                        </div><!--/.nav-collapse -->
                    </div>
                </div>
            </div>
        </header>
        <div class="mainContent container">
            <div class="row-fluid">
                <div class="span8">
                        <article>
        <header>
            <h2><a href="http://ericpoe.com/blog/2015/08/12/fresh-doughnut">so much depends upon a fresh doughnut</a></h2>
            <strong>2015-08-12</strong>
        </header>
        <div>
            <figure>
<pre>
so much depends
upon

a fresh dough
nut

glazed with maple
icing

beside the black
coffee.
</pre>
<figcaption>
&mdash; Based on <a href="http://www.poets.org/poetsorg/poem/red-wheelbarrow" target="_blank">The Red Wheelbarrow</a> by William Carlos Williams
</figcaption>
</figure>

        </div>
                    <p class="tags">
            Tags:
                        <a href="http://ericpoe.com/blog/tags/poetry">poetry</a>,                         <a href="http://ericpoe.com/blog/tags/parody">parody</a>                        </p>
            </article>
    <article>
        <header>
            <h2><a href="http://ericpoe.com/blog/2015/07/16/number-system-time-for-a-change">Number System: Time for a change?</a></h2>
            <strong>2015-07-16</strong>
        </header>
        <div>
            <p>I have been thinking about numbers for most of my life. It wasn't until I helped my oldest child learn to count to 20 that I thought that the way we count in the English language is silly. There is no logic in our base-10 counting system until we get to 17: "fif teen" (what's a "fif?") is followed by "six teen" (ah, six is a number I recognize!) which is followed by "seven teen" (aha! seven is another number I recognize!). And this got me thinking that surely there's a better way to count.</p>

<p>Soon thereafter, I started finding a better way to count in a chapter of Malcolm Gladwell's book, <a href="http://www.amazon.com/gp/product/0316017930/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0316017930&amp;linkCode=as2&amp;tag=erpo0f-20&amp;linkId=AZHPZTBIYAL52CGL">Outliers</a>. Gladwell posits that <a href="http://gladwell.com/outliers/rice-paddies-and-math-tests/">Chinese-speaking kids can memorize multi-digit numbers much faster than English-speaking kids can</a> since the sequence "4, 8, 5, 3, 9, 7, 6" is made up of monosyllabic words in Chinese and "7" has 2 syllables in English. I would add that since Chinese is a tonal language, this sequence also has its own tune. Quick show of hands, who knows the 7-digit phone number from the Tommy Tutone hit, "<a href="https://www.youtube.com/watch?v=6WTdTwcmxyo">Jenny</a>" from 1981? Do you know that number because you can sing the number or because you can recite the number?</p>

<p>In the same chapter, Gladwell suggests that adding numbers in Chinese is easier than in English because the names of the numbers are more logical in Chinese than in English. For instance, the number 25 is "twenty-five" in English and the equivalent to "two ten five" in Chinese. Aha! Then 11 is "ten 1" in Chinese and 123 is "hundred two-ten three" in Chinese. In English (and <lang = "es">En español</lang> ), the numbers between 11 and 15 are hard to memorize. In Chinese, pshh: "ten one," "ten two," "ten three," "ten four," "ten five."</p>

<p>This made me think that perhaps learning numbers would be easier if we came up with different units. If we were to count "0 - 10" in the standard English manner, then "11 - 19" would be known as "ten one," "ten two," "ten three," &amp; etc. "20 - 29" would be "two-ten," "two-ten one," "two-ten two," "two-ten three," &amp; etc.</p>

<p>Already, "1200" can be read two different ways in English, "One thousand two hundred" and "Twelve hundred.". It wouldn't be too large of a stretch for "1000" to no longer be known as "one thousand" but to be known as "ten hundred." Instead, "10000" would be known as "one thousand." Since the place names are changed in an exponential-growth pattern, this probably should be written as "1,0000" (10^4 or 100 hundreds) instead of "10,000." I could then call 1,0000,0000 "1 million" (10^8 or 1 thousand thousands) instead of "100 million," and 1,0000,0000,0000,0000 (10^16 or 1 million millions) "1 billion" instead of "10 quintillion."</p>

<table class="table table-bordered">
<tr>
    <th>Place</th>
    <th>10^0</th>
    <th>10^1</th>
    <th>10^2</th>
    <th>10^4</th>
    <th>10^8</th>
    <th>10^16</th>
    <th>10^32</th>
</tr>
<tr>
    <th>Place Name</th>
    <td>Ones</td>
    <td>Tens</td>
    <td>Hundreds</td>
    <td>Thousands</td>
    <td>Millions</td>
    <td>Billions</td>
    <td>Trillions</td>

</tr>
<tr>
    <th>Smallest Example</th>
    <td>1</td>
    <td>10</td>
    <td>100</td>
    <td>1,0000</td>
    <td>1,0000,<wbr>0000</td>
    <td>1,0000,<wbr>0000,<wbr>0000,<wbr>0000</td>
    <td>1,0000,<wbr>0000,<wbr>0000,<wbr>0000,<wbr>0000,<wbr>0000,<wbr>0000,<wbr>0000</td>
</tr>
</table>

<p>In my numbering system, I might also shorten two names: "seven" becomes "sep" and "tens" become "-ty"(pronounced like "tea")." 10 - 20 would be read as:</p>

<table class="table table-bordered">
<tr>
    <th>Number</th>
    <td>10</td>
    <td>11</td>
    <td>12</td>
    <td>13</td>
    <td>14</td>
    <td>15</td>
    <td>16</td>
    <td>17</td>
    <td>18</td>
    <td>19</td>
    <td>20</td>
</tr>
<tr>
    <th>Name</th>
    <td>Onety</td>
    <td>Onety-one</td>
    <td>Onety-two</td>
    <td>Onety-three</td>
    <td>Onety-four</td>
    <td>Onety-five</td>
    <td>Onety-six</td>
    <td>Onety-sep</td>
    <td>Onety-eight</td>
    <td>Onety-nine</td>
    <td>Twoty</td>
</tr>
</table>

<p>Already there's some logic to the number names. The place names would be recursive like so:</p>

<table class="table table-bordered">
<tr>
    <th>Number</th>
    <th>English Name</th>
    <th>New Name</th>
</tr>
<tr>
    <td>5</td>
    <td>Five</td>
    <td>Five</td>
</tr>
<tr>
    <td>55</td>
    <td>Fifty-five</td>
    <td>Fivety-five</td>
</tr>
<tr>
    <td>555</td>
    <td>Five-hundred fifty-five</td>
    <td>Five-hundred fivety-five</td>
</tr>
<tr>
    <td>5555</td>
    <td>Five-thousand fifty-five</td>
    <td>Fivety-five-hundred fivety-five</td>
</tr>
<tr>
    <td>5,5555</td>
    <td>Fifty-five-thousand five-hundred fifty-five</td>
    <td>Five-thousand fivety-hundred fivety-five</td>
</tr>
<tr>
    <td>55,5555</td>
    <td>Five-hundred-fifty-five-thousand five-hundred fifty-five</td>
    <td>Fivety-five-thousand fivety-hundred fivety-five</td>
</tr>
<tr>
    <td>555,5555</td>
    <td>Five-million five-hundred-fifty-five-thousand five-hundred fifty-five</td>
    <td>Five-hundred-fivety-five-thousand fivety-hundred fivety-five</td>
</tr>
<tr>
    <td>5555,5555</td>
    <td>Fifty-five-million five-hundred-fifty-five-thousand five-hundred fifty-five</td>
    <td>Fivety-five-hundred-fivety-five-thousand fivety-hundred fivety-five</td>
</tr>
<tr>
    <td>5,5555,5555</td>
    <td>Five-hundred-fifty-five-million five-hundred-fifty-five-thousand five-hundred fifty-five</td>
    <td>Five-million fivety-five-hundred-fivety-five-thousand fivety-hundred fivety-five</td>
</tr>
</table>

<h3 id="it%27s-already-been-done">It's Already Been Done</h3>

<p>While thinking of this numbering system, I found out that one of my programming heroes, Donald Knuth, had come up with a very similar alternative almost 30 years prior (1981 - same year as Tommy Tutone's number-memorization hit mentioned above -- coincidence?). His system is called "<a href="https://en.wikipedia.org/wiki/-yllion">-yllion</a>" and is also influenced by the Chinese number system, has exponential binary growth, grouping digits in fours, renames some of the numbers, and has recursive naming. Knuth gets rid of "thousand" and replaces it with "myriad;" "million," "billion," etc become "myllion," "byllion," etc. I thought it would be great to use a combination of the two, especially for insanely large numbers.</p>

<p>While driving or working, I would count things in this manner until it became second-nature to me. Then I realized that knowing a secret language that has a global speaker count of 1 is not a good thing. I could either spread my idea by conquering and burning the world ala Genghis Khan or I could quietly give up. I chose the more gentle option.</p>

<h3 id="the-chinese-connection">The Chinese Connection</h3>

<p>Fast forward to a few nights ago. I was studying the Chinese numbering system via edX's <a href="https://www.edx.org/school/mandarinx">MandarinX</a> course and was learning the  separate symbols for 1, 10, 100, &amp; 1000 (<lang = "zh">一, 十, 一百, 一千</lang>, respectively). Then it gets interesting, Chinese has symbols for 10,000 (<lang = "zh">一万</lang>) and doesn't have another new symbol until 100,000,000 (<lang = "zh">一亿</lang>). Why 10,000 and 100,000,000? Then I thought back to my toy numbering system. Notice any similarities?</p>

<table class="table table-bordered">
<tr>
    <th>My Number System</th>
    <th>Chinese</th>
</tr>
<tr>
    <td>1</td>
    <td lang = "zh">一</td>
</tr>
<tr>
    <td>10</td>
    <td lang = "zh">十</td>
</tr>
<tr>
    <td>100</td>
    <td lang = "zh">一百</td>
</tr>
<tr>
    <td>1000</td>
    <td lang = "zh">一千</td>
</tr>
<tr>
    <td>1,0000</td>
    <td lang = "zh">一万</td>
</tr>
<tr>
    <td>1,0000,0000</td>
    <td lang = "zh">一亿</td>
</tr>
</table>

<h3 id="a-modest-proposal">A Modest Proposal</h3>

<p>I do not believe that changing the Western number system is a reasonable expectation. After all, the Metric system (ok, "SI") has been around for several hundred years and the US is still stuck on the Imperial system for most things. We still use miles, pounds per square inch, and degrees Fahrenheit; but there's hope: I recently ran a 5K (5 kilometer) race, my mechanic has to use Metric wrenches on my and others' cars, and we buy bottles of soda and hooch in Liters (750 mL, 1.5 L, or 2 L). So perhaps there might be room for the -yllion system or maybe my modified -yllion system. Given the huge increase in drive sizes over the last 20 years, we are quickly running out of ways to describe their units of capacity. 25ish years ago, I thought that I was pretty hot stuff with my 20 MB (~ 20,971,520 Bytes) RLL hard drive. 1 decade later, I was thinking that my 250 GB (~ 268,435,456,000 Bytes) PATA drive was pretty hot stuff. A decade later, yesterday, I saw a 6 TB (~ 6,597,069,766,656 Bytes) drive array on sale for the same price I bought my first 20 MB hard drive. What's my point? The drives I'm describing are consumer-grade drives. In the IT-world, consumer-grade size is laughable. 15 years ago, I had heard an NPR report stating that the total size of data on the Internet was estimated to be 2 Terabytes. Last year, when I left a small IT shop in a small school district, we were in talks to bring on a drive array whose size was measured in Exabytes. Exabytes. That totally bypasses the whole Petabytes unit of measurement. So, after Exabytes, what then? Zottabytes? Then what? OMGigabytes?</p>

<p>If we were to recalibrate our units of measurement for computer-based things, perhaps we could have an easier time of describing those units of measurement if we were to use a different unit of measurement.</p>

<p>Let 1000 Bytes = 1 KB. I know 1 standard KB == 1024 Bytes, but let's go with the marketing assumption that computer units are base-10. That would mean that 1 Byte is the same as 0.001 KB. Now, let's expand upon these KB units using the -yllion number system:</p>

<table class="table table-bordered">
<tr>
    <th>Number</th>
    <th>Place</th>
    <th>Current Name</th>
    <th>New Name: Base = 1 KB</th>
    <th>New Name: Base = 1 GB</th>
</tr>
<tr>
    <td>0.001 KB</td>
    <td>10^-3</td>
    <td>1 Byte</td>
    <td>1 ten-hundredth KB</td>
    <td>100 Myriad Myllionth GB</td>
</tr>
<tr>
    <td>0.01 KB</td>
    <td>10^-2</td>
    <td>10 Bytes</td>
    <td>1 hundredth KB</td>
    <td>10 Myriad Myllionth GB</td>
</tr>
<tr>
    <td>0.1 KB</td>
    <td>10^-1</td>
    <td>100 Bytes</td>
    <td>1 tenth KB</td>
    <td>1 Myriad Myllionth GB</td>
</tr>
<tr>
    <td>1 KB</td>
    <td>10^0</td>
    <td>1 KB</td>
    <td>1 KB</td>
    <td>100 Myllionth GB</td>
</tr>
<tr>
    <td>10 KB</td>
    <td>10^1</td>
    <td>10 Kilobytes</td>
    <td>10 KB</td>
    <td>10 Myllionth GB</td>
</tr>
<tr>
    <td>100 KB</td>
    <td>10^2</td>
    <td>100 Kilobytes</td>
    <td>1 Hundred KB</td>
    <td>1 Myllionth GB</td>
</tr>
<tr>
    <td>1000 KB</td>
    <td>10^3</td>
    <td>1 Megabyte</td>
    <td>10 Hundred KB</td>
    <td>100 Myriadth GB</td>
</tr>
<tr>
    <td>1,0000 KB</td>
    <td>10^4</td>
    <td>10 Megabytes</td>
    <td>1 Myriad KB</td>
    <td>10 Myriadth GB</td>
</tr>
<tr>
    <td>10,0000 KB</td>
    <td>10^5</td>
    <td>100 Megabytes</td>
    <td>10 Myriad KB</td>
    <td>1 Myriadth GB</td>
</tr>
<tr>
    <td>100,0000 KB</td>
    <td>10^6</td>
    <td>1 Terabyte</td>
    <td>1 Hundred Myriad KB</td>
    <td>10 Hundredth GB</td>
</tr>
<tr>
    <td>1000,0000 KB</td>
    <td>10^7</td>
    <td>10 Terabytes</td>
    <td>10 Hundred Myriad KB</td>
    <td>1 Hundredth GB</td>
</tr>
<tr>
    <td>1;0000,0000 KB</td>
    <td>10^8</td>
    <td>100 Terabytes</td>
    <td>1 Myllion KB</td>
    <td>1 Tenth GB</td>
</tr>
<tr>
    <td>10;0000,0000 KB</td>
    <td>10^9</td>
    <td>1 Gigabyte</td>
    <td>10 Myllion KB</td>
    <td>1 GB</td>
</tr>
<tr>
    <td>100;0000,0000 KB</td>
    <td>10^10</td>
    <td>10 Gigabytes</td>
    <td>1 Hundred Myllion KB</td>
    <td>10 GB</td>
</tr>
<tr>
    <td>1000;0000,0000 KB</td>
    <td>10^11</td>
    <td>100 Gigabytes</td>
    <td>10 Hundred Myllion KB</td>
    <td>1 Hundred GB</td>
</tr>
<tr>
    <td>1,0000;0000,0000 KB</td>
    <td>10^12</td>
    <td>1 Terabyte</td>
    <td>1 Myriad Myllion KB</td>
    <td>10 Hundred GB</td>
</tr>
<tr>
    <td>10,0000;0000,0000 KB</td>
    <td>10^13</td>
    <td>10 Terabytes</td>
    <td>10 Myriad Myllion KB</td>
    <td>1 Myriad GB</td>
</tr>
<tr>
    <td>100,0000;0000,0000 KB</td>
    <td>10^14</td>
    <td>100 Terabytes</td>
    <td>100 Myriad Myllion KB</td>
    <td>10 Myriad GB</td>
</tr>
<tr>
    <td>1000,0000;0000,0000 KB</td>
    <td>10^15</td>
    <td>1 Petabyte</td>
    <td>10 Hundred Myriad Myllion KB</td>
    <td>100 Myriad GB</td>
</tr>
<tr>
    <td>1:0000,0000;0000,0000 KB</td>
    <td>10^16</td>
    <td>10 Petabytes</td>
    <td>1 Byllion KB</td>
    <td>1 Myllion GB</td>
</tr>
<tr>
    <td>1'<wbr>0000,0000;0000,0000:<wbr>0000,0000;0000,0000 KB</td>
    <td>10^32</td>
    <td>100 Million Yottabytes</td>
    <td>1 Tryllion KB</td>
    <td>100 Myriad Myllion Byllion GB</td>
</tr>
<tr>
    <td>1'<wbr>0000,0000;0000,0000:<wbr>0000,0000;0000,0000'<wbr>0000,0000;0000,0000:<wbr>0000,0000;0000,0000 KB</td>
    <td>10^64</td>
    <td>10 Duodecillion Yottabytes</td>
    <td>1 Quadryllion KB</td>
    <td>100 Myriad Myllion Byllion Tryllion GB</td>
</tr>
</table>

<p>As you can see, somewhere between 10 Petabytes (1 Byllion KB) and 100 Million Yottabytes (1 Tryllion KB), we run out of SI units to describe the computer capacity. At some point, we'll either have to come up with a bunch of SI units to use with capacity, or we'll have to come up with a different way to count that capacity.</p>

<p>I expect to see capacities measured in Yottabytes within the next 20 years. Then what?</p>

        </div>
                    <p class="tags">
            Tags:
                        <a href="http://ericpoe.com/blog/tags/math">math</a>,                         <a href="http://ericpoe.com/blog/tags/learning">learning</a>,                         <a href="http://ericpoe.com/blog/tags/Chinese">Chinese</a>                        </p>
            </article>
    <article>
        <header>
            <h2><a href="http://ericpoe.com/blog/2015/07/08/php-array-filter-oddity">PHP&#039;s Array_Filter Oddity</a></h2>
            <strong>2015-07-08</strong>
        </header>
        <div>
            <p>I was studying the <a href="http://php.net/manual/en/function.array-filter.php"><code>array_filter</code></a> in PHP and was enjoying coming up with a test that could help me learn better <code>array_filter</code> magic. For instance, to filter all words whose first letter is a vowel, I created this PHPUnit test:</p>

<pre><code class="php">public function testFilterVowelWords()
{
    $vowel = function ($word) {
        $vowels = ["a", "e", "i", "o", "u"];
        return in_array($word[0], $vowels);
    };

    $words = ["apple", "baby", "cookie", "danger", "element", "fountain", "grape"];

    $vowelWords = array_filter($words, $vowel);

    $this-&gt;assertEquals(["apple", "element"], array_values($vowelWords));
}
</code></pre>

<p>So, yay <code>array_filter</code>! But wait, what's this? There's an optional flag for <code>array_filter</code> that was introduced in PHP 5.6? It allows one to filter by array key, or if one is completely nuts, by both array value and array key. Woah.
<img src="https://s3.amazonaws.com/giphymedia/media/yUIktdHUIamcg/giphy.gif"></p>

<p>So, if one were to filter by key, easy-peasy. The flag is <code>ARRAY_FILTER_USE_KEY</code>:</p>

<pre><code class="php">public function testFilterVowelWordsByKey()
{
    $vowel = function ($key) {
        $vowels = ["a", "e", "i", "o", "u"];
        return in_array($key, $vowels);
    };

    $words = ["a" =&gt; "apple", "b" =&gt; "baby", "c"=&gt;"cookie", "d"=&gt;"danger", "e"=&gt;"element", "f"=&gt;"fountain", "g"=&gt;"grape"];

    $vowelWords = array_filter($words, $vowel, ARRAY_FILTER_USE_KEY);

    $this-&gt;assertEquals(["a"=&gt;"apple", "e"=&gt;"element"], $vowelWords);
}
</code></pre>

<p>So, if one wanted to filter by key AND value, the flag would be <code>ARRAY_FILTER_USE_BOTH</code>, right?</p>

<pre><code class="php">public function testFilterVowelWordsByKeyAndValue()
{
    $strange = function ($key, $value) {
        $vowels = ["a", "e", "i", "o", "u"];
        if (in_array($key, $vowels)) {
            return true;
        } else {
            return (in_array($value[1], $vowels));
        }
    };

    $words = ["a" =&gt; "apple", "b" =&gt; "baby", "c"=&gt;"cookie", "d"=&gt;"danger", "e"=&gt;"element", "f"=&gt;"fountain", "g"=&gt;"grape"];

    $vowelWords = array_filter($words, $strange, ARRAY_FILTER_USE_BOTH);

    $this-&gt;assertEquals(["a"=&gt;"apple", "b"=&gt;"baby", "c" =&gt; "cookie", "d" =&gt; "danger", "e" =&gt; "element", "f" =&gt; "fountain"], $vowelWords);
}
</code></pre>

<p>Yet, epic fail!</p>

<p>The <code>ARRAY_FILTER_USE_BOTH</code> flag requires the order: <code>value</code> then <code>key</code> NOT <code>key</code> then <code>value</code></p>

<pre><code class="php">public function testFilterVowelWordsByKeyAndValue()
{
    $strange = function ($value, $key) {
        $vowels = ["a", "e", "i", "o", "u"];
        if (in_array($value[1], $vowels)) {
            return true;
        } else {
            return (in_array($key, $vowels));
        }
    };

    $words = ["a" =&gt; "apple", "b" =&gt; "baby", "c"=&gt;"cookie", "d"=&gt;"danger", "e"=&gt;"element", "f"=&gt;"fountain", "g"=&gt;"grape"];

    $vowelWords = array_filter($words, $strange, ARRAY_FILTER_USE_BOTH);

    $this-&gt;assertEquals(["a"=&gt;"apple", "b"=&gt;"baby", "c" =&gt; "cookie", "d" =&gt; "danger", "e" =&gt; "element", "f" =&gt; "fountain"], $vowelWords);
}
</code></pre>

<p>Yay! This test passes! But, what the heck? Why <code>value</code> then <code>key</code>? Every time we read about <code>key =&gt; value</code> pairs, it's in the order of <code>key</code> then <code>value</code>. Yet, this is <code>value</code> then <code>key</code>. What gives?</p>

<p>I looked into this. I couldn't find any <a href="https://wiki.php.net/rfc">RFCs</a> recommending this order. I even checked PHP internals discussions and saw the question raised of <a href="http://marc.info/?l=php-internals&amp;m=137159339704961&amp;w=2">which should come first, key or value</a>, but the question doesn't get answered. Eventually, we get a statement of (paraphrased)<a href="http://marc.info/?l=php-internals&amp;m=138023845322301&amp;w=2">"Hey, having flags for using key or using both key &amp; value is great, I'll add it."</a>. The <a href="https://github.com/php/php-src/pull/287">pull request</a>, though it contains discussion on adding this flag, doesn't contain any discussion on parameter order. The <a href="https://github.com/php/php-src/blob/master/ext/standard/array.c#L4803">source code</a> does not contain enough documentation to give an inkling as to why this is.</p>

<p>I struggled to figure out a good reason for <code>value</code> to come before <code>key</code> when using the <code>ARRAY_FILTER_USE_BOTH</code> flag. In desperation, I reached out to the PHP Internals dev who implemented this feature, Tjerk Meesters (aka '<a href="https://twitter.com/datibbaW">datibbaw</a>'). As an exemplar of where the amazing PHP community shines, Tjerk responded within minutes with helpful background information on this feature. First, this feature was designed to not break existing implementations of <code>array_filter</code>. Adding <code>key</code> as the second parameter seemed to be the most polite way to do this. Secondly, this is the same order as used in JavaScript's <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter">Array.prototype.filter()</a>. Boom.</p>

<p>The way I justify the order is by looking at the original intent of <code>array_filter</code> -- it was designed to filter an array based on the values contained within that array. So, value is first and foremost the primary thing this function checks against; the key is merely secondary. Therefore, when using the <code>ARRAY_FILTER_USE_BOTH</code> flag, the order of parameters for the callback will be <code>value</code> and then <code>key</code>.</p>

<p>If I were to treat this function as a consumer that turns food into another product, the main food this function eats is the value platter. For dessert, it might choose to eat a key lime pie. Or it might decide to order the full course and ask for both the value platter with dessert.</p>

<p>What had seemed like an oddity at first now makes sense in the right frame of mind. If you use <code>array_filter</code>, remember that it is all about the array <code>value</code>. If you want to include the <code>key</code> in the filter, know that <code>key</code> is always secondary to the original intent.</p>

        </div>
                    <p class="tags">
            Tags:
                        <a href="http://ericpoe.com/blog/tags/php">php</a>,                         <a href="http://ericpoe.com/blog/tags/community">community</a>                        </p>
            </article>
    <nav>
        <br />
        <a href="http://ericpoe.com/page/2">Older Posts</a><br />
    </nav>
                </div>
                <div class="span4 sidebar">
                    <div class="well">
                        <h4>Eric Poe <small>A Gentle Coder, Dad, and Sometime Wit</small></h4>
                        <div class="social">
                            <ul>
                                <li><a href="http://twitter.com/eric_poe"><i class="fa fa-twitter fa-fw fa-2x"></i></a></li>
                                <li><a href="mailto:info@ericpoe.com"><i class="fa fa-envelope fa-fw fa-2x"></i></a></li>
                                <li><a href="https://github.com/ericpoe/"><i class="fa fa-github fa-fw fa-2x"></i></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <footer class="container">
            <span class="pull-left">
                &copy; 2015 Eric Poe
            </span>
            <span class="pull-right">
                Powered by <a target="_blank" href="https://sculpin.io">Sculpin</a>
            </span>
            <div class="social">
                <ul>
                    <li><a href="http://twitter.com/eric_poe"><i class="fa fa-twitter fa-fw fa-2x"></i></a></li>
                    <li><a href="mailto:info@ericpoe.com"><i class="fa fa-envelope fa-fw fa-2x"></i></a></li>
                    <li><a href="https://github.com/ericpoe/"><i class="fa fa-github fa-fw fa-2x"></i></a></li>
                </ul>
            </div>
        </footer>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="http://ericpoe.com/components/jquery/jquery.min.js"><\/script>')</script>
        <script src="http://ericpoe.com/components/bootstrap/js/bootstrap.min.js"></script>
                
        
        <script type="text/javascript">
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-56604616-1', 'auto');
            ga('require', 'displayfeatures');
            ga('send', 'pageview');
        </script>
                <script src="http://ericpoe.com/components/highlightjs/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>

                    </body>
</html>
